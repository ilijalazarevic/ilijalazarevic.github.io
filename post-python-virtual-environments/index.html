<!DOCTYPE html> <html lang="en-US"> <head prefix="og: http://ogp.me/ns#"> <meta charset="UTF-8" /> <meta http-equiv="X-UA-Compatible" content="ie=edge" /> <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <meta name="mobile-web-app-capable" content="yes" /> <meta name="apple-mobile-web-app-capable" content="yes" /> <meta name="application-name" content="Ilija Lazarevic" /> <meta name="apple-mobile-web-app-status-bar-style" content="#fff" /> <meta name="apple-mobile-web-app-title" content="Ilija Lazarevic" /> <title> Managing Python Versions and Virtual Environments - Ilija Lazarevic </title> <link rel="alternate" href="https://ilijalazarevic.com/post-python-virtual-environments/" hreflang="en-US" /> <link rel="canonical" href="https://ilijalazarevic.com/post-python-virtual-environments/" /> <meta name="description" content="The best complementary tools for managing virtual environments in Python development process" /> <meta name="referrer" content="no-referrer-when-downgrade" /> <meta property="fb:app_id" content="" /> <meta property="og:site_name" content="Managing Python Versions and Virtual Environments | Ilija Lazarevic" /> <meta property="og:title" content="Managing Python Versions and Virtual Environments | Ilija Lazarevic" /> <meta property="og:type" content="website" /> <meta property="og:url" content="https://ilijalazarevic.com/post-python-virtual-environments/" /> <meta property="og:description" content="The best complementary tools for managing virtual environments in Python development process" /> <meta property="og:image" content="" /> <meta property="og:image:width" content="640" /> <meta property="og:image:height" content="640" /> <meta name="twitter:card" content="summary" /> <meta name="twitter:title" content="Managing Python Versions and Virtual Environments | " /> <meta name="twitter:url" content="https://ilijalazarevic.com/post-python-virtual-environments/" /> <meta name="twitter:site" content="@" /> <meta name="twitter:creator" content="@" /> <meta name="twitter:description" content="The best complementary tools for managing virtual environments in Python development process" /> <meta name="twitter:image" content="" /> <link type="application/atom+xml" rel="alternate" href="https://ilijalazarevic.com/feed.xml" title="Ilija Lazarevic" /> <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicons/apple-touch-icon.png" /> <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png" /> <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png" /> <link rel="manifest" href="/assets/favicons/site.webmanifest" /> <link rel="mask-icon" href="/assets/favicons/safari-pinned-tab.svg" color="#5bbad5" /> <meta name="apple-mobile-web-app-title" content="Jekyll Klise" /> <meta name="application-name" content="Jekyll Klise" /> <meta name="msapplication-TileColor" content="#da532c" /> <meta name="theme-color" content="#2c2c2c" /> <link rel="stylesheet" href="/assets/css/style.css" /> <!-- for mathjax support --> </head> <body data-theme="dark" class="notransition"> <script> const body = document.body; const data = body.getAttribute("data-theme"); const initTheme = (state) => { if (state === "dark") { body.setAttribute("data-theme", "dark"); } else if (state === "light") { body.removeAttribute("data-theme"); } else { localStorage.setItem("theme", data); } }; initTheme(localStorage.getItem("theme")); setTimeout(() => body.classList.remove("notransition"), 75); </script> <div class="navbar" role="navigation"> <nav class="menu"> <input type="checkbox" id="menu-trigger" class="menu-trigger" /> <label for="menu-trigger"> <span class="menu-icon"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <path d="M64,384H448V341.33H64Zm0-106.67H448V234.67H64ZM64,128v42.67H448V128Z" /> </svg> </span> </label> <a id="mode"> <svg class="mode-sunny" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <title>LIGHT</title> <line x1="256" y1="48" x2="256" y2="96" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="256" y1="416" x2="256" y2="464" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="108.92" x2="369.14" y2="142.86" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="369.14" x2="108.92" y2="403.08" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="464" y1="256" x2="416" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="96" y1="256" x2="48" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="403.08" x2="369.14" y2="369.14" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="142.86" x2="108.92" y2="108.92" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <circle cx="256" cy="256" r="80" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> </svg> <svg class="mode-moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <title>DARK</title> <line x1="256" y1="48" x2="256" y2="96" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="256" y1="416" x2="256" y2="464" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="108.92" x2="369.14" y2="142.86" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="369.14" x2="108.92" y2="403.08" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="464" y1="256" x2="416" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="96" y1="256" x2="48" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="403.08" x2="369.14" y2="369.14" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="142.86" x2="108.92" y2="108.92" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <circle cx="256" cy="256" r="80" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> </svg> </a> <div class="trigger"> <div class="trigger-container"><a class="menu-link" href="/">home</a><a class="menu-link" href="/archive/">archive</a><a class="menu-link" href="/about/">about</a><a class="menu-link rss" href="/feed.xml"> <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 512 512" fill="#ED812E" > <title>RSS</title> <path d="M108.56,342.78a60.34,60.34,0,1,0,60.56,60.44A60.63,60.63,0,0,0,108.56,342.78Z" /> <path d="M48,186.67v86.55c52,0,101.94,15.39,138.67,52.11s52,86.56,52,138.67h86.66C325.33,312.44,199.67,186.67,48,186.67Z" /> <path d="M48,48v86.56c185.25,0,329.22,144.08,329.22,329.44H464C464,234.66,277.67,48,48,48Z" /> </svg> </a> </div> </div> </nav> </div> <div class="wrapper post"> <main class="page-content" aria-label="Content"> <article itemscope itemtype="https://schema.org/BlogPosting"> <header class="header"> <div class="tags"> <span itemprop="keywords"> <a class="tag" href="/tags/#python">PYTHON</a>, <a class="tag" href="/tags/#software">SOFTWARE</a>, <a class="tag" href="/tags/#development">DEVELOPMENT</a> </span> </div> <h1 class="header-title" itemprop="headline">Managing Python Versions and Virtual Environments</h1> <div class="post-meta"> <time datetime="2023-07-13T14:21:28+02:00" itemprop="datePublished"> Jul 13, 2023 </time> <span itemprop="author" itemscope itemtype="https://schema.org/Person"> <span itemprop="name">Ilija Lazarevic</span> </span> <time hidden datetime="2023-07-13T14:21:28+02:00" itemprop="dateModified"> Jul 13, 2023 </time> <span hidden itemprop="publisher" itemtype="Person">Ilija Lazarevic</span> <span hidden itemprop="image"></span> <span hidden itemprop="mainEntityOfPage"><p>The idea for this blog post is about how Python can be used in different environments. These are so-called “virtual environments” in Python, and there have been many tools that provide this capability with more or less additional functionalities.</p> </span> </div> </header> <div class="page-content" itemprop="articleBody"> <p>The idea for this blog post is about how Python can be used in different environments. These are so-called “virtual environments” in Python, and there have been many tools that provide this capability with more or less additional functionalities.</p> <p>Some of you may remember <code class="language-plaintext highlighter-rouge">venv</code> and the <code class="language-plaintext highlighter-rouge">virtualenv</code> as one of the first tools that enabled developers to create specific virtual environments and not pollute the system. However, a lot was left to be desired. So then there were <code class="language-plaintext highlighter-rouge">virtualenvwrapper</code> and <code class="language-plaintext highlighter-rouge">pipenv</code>. These tried to address the lack of usability in some use cases. However, the main points that all of these tools want to address are:</p> <ol> <li>deal with multiple Python interpreter versions,</li> <li>where to install a virtual environment, or have some consistent way of doing it,</li> <li>how to logically connect the virtual environment with your project if it was installed somewhere else and not in the project directory,</li> <li>activate the virtual environment when you are about to work on the project, and then deactivate it,</li> <li>keep the lists of installed packages that were used for project development and for using the project as a library in another project,</li> <li>how to pack your project and publish it in a consistent way.</li> </ol> <p>There is a slight chance I forgot some pain points that developers had to solve. Nevertheless, you can see that there are already enough concerns to deal with once you start working on your Python projects.</p> <p>Those of you who know what I’m talking about will shout (silently) “Hey, you forgot <code class="language-plaintext highlighter-rouge">pyenv</code> and <code class="language-plaintext highlighter-rouge">poetry</code>!” And you would be wrong, since these two were exactly the reasons why I wanted to write this blog post. And yes, you can use just one of these. However, I like to use them both as complementary tools to achieve all of the previously addressed points in the list above.</p> <h2 id="pyenv"> <a href="#pyenv" class="anchor-head"></a> Pyenv </h2> <p>This tool is really handy if you want to have more than one Python interpreter version available on your system. I will not go over the installation and basic usage tutorials here. My idea is to give you a general overview of how <code class="language-plaintext highlighter-rouge">pyenv</code> works.</p> <p>On a vanilla system, you will probably have just one Python interpreter version installed. This will be enough for simple fiddling with Python or even working on your project, as long as the project’s Python version is exactly the same as the one on your system. Of course, you would have to install packages on a system level and pray that you wouldn’t work on two different projects with different sets of packages (and versions) at the same time.</p> <p>Once you start being more serious with your development and research, you will find yourself using different Python interpreter versions with different sets of packages and their versions on each project. Using system-installed Python will probably get messy, and there is a high chance you will end up “devopsing” your time instead of focusing on Python’s Zen.</p> <p>Here, <code class="language-plaintext highlighter-rouge">pyenv</code> comes to the rescue. It gives you a way to install as many Python interpreter versions as you want. And not just CPython ones, but others like PyPy, Pyston, and Stackless. You can really enjoy your options. And even though this part is really handy and superb, the next thing is even better. You can change the interpreter versions used on three different levels: global, local, and shell.</p> <p>The global level is just the default interpreter version on your system. This way, whenever and wherever you type <code class="language-plaintext highlighter-rouge">python</code> in shell or run your project with <code class="language-plaintext highlighter-rouge">python main.py</code> you will use this specific version of the interpreter. You set this by executing <code class="language-plaintext highlighter-rouge">pyenv global &lt;version&gt;</code> in your shell.</p> <p>Local level is even better because you set the interpreter version for the specific directory. This should be the project’s directory, so once you change your path to this project’s directory, the interpreter version used should be updated. The same interpreter version is set for all subdirectories. You can set this by executing <code class="language-plaintext highlighter-rouge">pyenv local &lt;version&gt;</code> in the shell, and you end up with <code class="language-plaintext highlighter-rouge">.python-version</code> file in the current directory, that specifies desired version.</p> <p>Shell level is even more granular and sets the interpreter version just for the current shell that you are in. This is the least persistent setup because once you exit the shell and open it again, you end up with the interpreter version set up locally (if it is) or globally (which is set by default).</p> <p>This makes your life a lot easier.</p> <p>One more thing that is really handy is that you can manage virtual environments with <code class="language-plaintext highlighter-rouge">pyenv</code>. By having multiple interpreter versions and implementations, you are able to instantiate many virtual environments. These are installed at the specific system location set up by default. You can just write each down on a piece of paper and remember which project it belongs to, or you can just run <code class="language-plaintext highlighter-rouge">pyenv local &lt;virtual env name&gt;</code> in the project directory. This way, you get the automatic virtual environment activation once you position yourself in the project directory in shell.</p> <p>In essence, <code class="language-plaintext highlighter-rouge">pyenv</code> solves 1.-4. points from the list given above. You could deal with the other two points for sure, but you would have to use additional tools. I see that <code class="language-plaintext highlighter-rouge">pyenv</code> was not created with that goal. And here we can slide into our next part.</p> <h2 id="poetry"> <a href="#poetry" class="anchor-head"></a> Poetry </h2> <p>While <code class="language-plaintext highlighter-rouge">pyenv</code> gives the ability to manage different Python interpreter versions and many different virtual environments, <code class="language-plaintext highlighter-rouge">poetry</code> is good for managing package versions for each project (and virtual environment). <code class="language-plaintext highlighter-rouge">poetry</code> has its own way of managing virtual environments, which, in my opinion, should not be mixed with <code class="language-plaintext highlighter-rouge">pyenv</code> way.</p> <p>Obviously, I will not be able to squeeze all of the information on how to use <code class="language-plaintext highlighter-rouge">poetry</code> here, but in general, it uses meta files that describe your project and specify versions of packages used. Or, to make it more eloquent, it is a tool to deal with dependency management in your project. Those who are seasoned developers can find this extremely important because of so-called <em>dependency hell</em>, while the newcomers will learn the importance of this very soon, if not already.</p> <p>And while the user manual goes into depth describing how <code class="language-plaintext highlighter-rouge">poetry</code> can and should be used, it is interesting how it can be composed with <code class="language-plaintext highlighter-rouge">pyenv</code>. More precisely, my advice would be to use <code class="language-plaintext highlighter-rouge">pyenv</code> to make different Python interpreter versions available, and then use <code class="language-plaintext highlighter-rouge">poetry</code> to install a virtual environment for your project. Creating projects in <code class="language-plaintext highlighter-rouge">poetry</code> is as easy as running <code class="language-plaintext highlighter-rouge">poetry new &lt;project name&gt;</code>. From there you are able to install packages, update their versions, enter a virtual environment for easier interaction with the code, and so on.</p> <p>Additionally, <code class="language-plaintext highlighter-rouge">poetry</code> gives you a way of structuring your project so you can publish it as a package/library. This way, it can be publicly available on PyPi or in private repositories.</p> <p>Essentially, <code class="language-plaintext highlighter-rouge">poetry</code> solves the main points 2.-.6. So it’s almost all of them. This is why I think it is a good choice to use it with <code class="language-plaintext highlighter-rouge">pyenv</code> to achieve a smooth development process.</p> <p>In the end, I want to make it clear that it is really up to you which set of tools you are going to use for your project, but you have to be aware of the scaling development process and make it smooth not just for you but for the whole team. You even have to make sure your project, which is going to be an integral part of some other project, is well structured with a logical package structure and good versioning. What could make your life easier as a contributor to a library could make library users lives harder. Have that in mind.</p> <p>Anyway, have a nice day and share this blog post if you liked it!</p> <h2 id="references"> <a href="#references" class="anchor-head"></a> References </h2> <ul> <li><a href="https://realpython.com/intro-to-pyenv/#virtual-environments-and-pyenv">Managing Multiple Python Versions With pyenv</a></li> <li><a href="https://python-poetry.org/docs/">Python packaging and dependency management made easy</a></li> </ul> </div> </article> </main> <small class="post-updated-at">updated_at 13-07-2023</small> <nav class="post-nav"> <a class="post-nav-item post-nav-prev" href="/post-python-variable-passing/" > <div class="nav-arrow">Previous</div> <span class="post-title">Is Python pass by value or pass by reference?</span> </a> </nav> <footer class="footer"> <span class="footer_item">Ilija Lazarevic &copy; 2023</span> <small class="footer_copyright"> <!-- Klisé Theme: https://github.com/piharpi/jekyll-klise --> <a href="https://github.com/piharpi/jekyll-klise" target="_blank" rel="noreferrer noopener" >klisé</a > theme on <a href="https://jekyllrb.com" target="_blank" rel="noreferrer noopener" >jekyll</a > </small> </footer> <script src="/assets/js/main.js" defer="defer"></script> </div> </body> </html>
